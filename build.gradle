/*
 * ================================================================
 * ğŸ“ mapofdev í”„ë¡œì íŠ¸ Gradle ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸
 * ================================================================
 * 
 * ì´ íŒŒì¼ì€ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê³  ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ëŠ” ì„¤ì • íŒŒì¼ì…ë‹ˆë‹¤.
 * Gradleì€ Java í”„ë¡œì íŠ¸ë¥¼ ì»´íŒŒì¼í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ê³  ë°°í¬í•˜ëŠ” ë¹Œë“œ ë„êµ¬ì…ë‹ˆë‹¤.
 * Gradleì€ DSL, ë„ë©”ì¸ ì„¤ì • ì–¸ì–´, íŠ¹ì • ëª©ì ì„ ìœ„í•´ ì„¤ê³„ëœ ì‘ê³  ì œí•œëœ ì–¸ì–´ (ì¼ë°˜ ê³ ê¸‰ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ëŠ” ë²”ìš©ì„±ì´ í¼)
 * (DSL ì–¸ì–´ ì˜ˆ : HTML, SQL)
 *
 * ğŸ¯ ì´ íŒŒì¼ì„ í†µí•´ ë°°ìš°ëŠ” ê²ƒ:
 * - Spring Boot í”„ë¡œì íŠ¸ êµ¬ì¡°
 * - ì˜ì¡´ì„± ê´€ë¦¬ (ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€)
 * - í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©ë²•
 * - í”„ë¡œì íŠ¸ ì„¤ì •
 */

// ================================================================
// ğŸ”Œ í”ŒëŸ¬ê·¸ì¸ ì„¤ì • (Gradleì—ê²Œ ì–´ë–¤ ê¸°ëŠ¥ì„ ì‚¬ìš©í• ì§€ ì•Œë ¤ì£¼ëŠ” ì˜ì—­)
// ================================================================
plugins {

	id 'java' // Java ì–¸ì–´ ì§€ì› í”ŒëŸ¬ê·¸ì¸ (ìë°” ì»´íŒŒì¼, í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë“±)

	id 'org.springframework.boot' version '3.5.3' // Spring Boot í”ŒëŸ¬ê·¸ì¸ (Spring Boot ì•±ì„ ì‰½ê²Œ ë¹Œë“œí•˜ê³  ì‹¤í–‰)
	// 3.5.3 ë²„ì „ ì‚¬ìš© (2024ë…„ ìµœì‹  ì•ˆì • ë²„ì „)

	id 'io.spring.dependency-management' version '1.1.7' // Spring ì˜ì¡´ì„± ê´€ë¦¬ í”ŒëŸ¬ê·¸ì¸ (Spring ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ ìë™ ê´€ë¦¬)
}

// ================================================================
// ğŸ“‹ í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´ (íšŒì‚¬ë‚˜ ê°œì¸ í”„ë¡œì íŠ¸ì˜ ì‹ ì›)
// ================================================================
group = 'dev.mapofdev'                                    // í”„ë¡œì íŠ¸ ê·¸ë£¹ (ë³´í†µ ë„ë©”ì¸ëª…ì„ ê±°ê¾¸ë¡œ)
version = '0.0.1-SNAPSHOT'                                // í”„ë¡œì íŠ¸ ë²„ì „ (SNAPSHOT = ê°œë°œ ì¤‘)
description = 'ë°ì´í„°ë¡œ ì»¤ë¦¬ì–´ë¥¼ ì„¤ê³„í•˜ë‹¤ â€“ ë‹¹ì‹ ë§Œì˜ ì»¤ë¦¬ì–´ ë‚˜ì¹¨ë°˜'  // í”„ë¡œì íŠ¸ ì„¤ëª…


// ================================================================
// â˜• Java ì„¤ì • (ì–´ë–¤ ìë°” ë²„ì „ì„ ì‚¬ìš©í• ì§€)
// ================================================================
java {
	toolchain {
		languageVersion = JavaLanguageVersion.of(17) // Java 17 ì‚¬ìš© (Spring Boot 3.xëŠ” Java 17 ì´ìƒ í•„ìš”)
	}
}

// ================================================================
// ğŸ”§ íŠ¹ìˆ˜ ì„¤ì • (Lombokê³¼ ê°™ì€ ë„êµ¬ë¥¼ ìœ„í•œ ì„¤ì •)
// ================================================================
configurations {
	compileOnly { 
		extendsFrom annotationProcessor 		// Lombokì„ ì–´ë…¸í…Œì´ì…˜ í”„ë¡œì„¸ì„œë¡œ ì²˜ë¦¬í•˜ë„ë¡ ì„¤ì •
		// ì´ë ‡ê²Œ í•˜ë©´ @Getter, @Setter ë“± ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ í´ë˜ìŠ¤ì— ë¶™ì´ê³  ì»´íŒŒì¼ ì‹œ,
		// ìë™ìœ¼ë¡œ í•´ë‹¹ í´ë˜ìŠ¤ ë‚´ë¶€ì— ë©”ì„œë“œë¥¼ ë¶™ì„
	}
}

// ================================================================
// ğŸ“¦ ì €ì¥ì†Œ ì„¤ì • (ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì–´ë””ì„œ ë‹¤ìš´ë¡œë“œí• ì§€)
// ================================================================
repositories {
	// Maven Central ì €ì¥ì†Œ (ê°€ì¥ í° Java ë¼ì´ë¸ŒëŸ¬ë¦¬ ì €ì¥ì†Œ)
	mavenCentral()
}

// ================================================================
// ğŸ“Œ ë²„ì „ ê´€ë¦¬ (ì¤‘ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ì„ í•œ ê³³ì—ì„œ ê´€ë¦¬)
// ================================================================
ext {
	// JWT í† í° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ (ë¡œê·¸ì¸ í† í° ìƒì„±ìš©)
	set('jjwtVersion', '0.12.3')

	// Jsoup ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ (ì›¹ í¬ë¡¤ë§ìš©)
	set('jsoupVersion', '1.17.2')

	// SpringDoc ë¼ì´ë¸ŒëŸ¬ë¦¬ ë²„ì „ (API ë¬¸ì„œ ìë™ ìƒì„±ìš©)
	set('springDocVersion', '2.3.0')
}

// ================================================================
// ğŸ“š ì˜ì¡´ì„± ì„¤ì • (í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤)
// ================================================================
dependencies {

	// ----------------------------------------------------------------
	// ğŸ—ï¸ Spring Boot í•µì‹¬ ê¸°ëŠ¥ë“¤ (ìŠ¤í”„ë§ ë¶€íŠ¸ì˜ ê¸°ë³¸ ê¸°ëŠ¥)
	// ----------------------------------------------------------------

	// ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œ (REST API ë§Œë“¤ê¸°)
	implementation 'org.springframework.boot:spring-boot-starter-web'

	// ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ (JPA - ìë°”ë¡œ DB ì‰½ê²Œ ë‹¤ë£¨ê¸°)
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'

	// ë³´ì•ˆ ê¸°ëŠ¥ (ë¡œê·¸ì¸, ê¶Œí•œ ê´€ë¦¬)
	implementation 'org.springframework.boot:spring-boot-starter-security'

	// ì…ë ¥ê°’ ê²€ì¦ (@Valid, @NotNull ë“±)
	implementation 'org.springframework.boot:spring-boot-starter-validation'

	// ----------------------------------------------------------------
	// ğŸ” ì¸ì¦ ê´€ë ¨ (GitHub ë¡œê·¸ì¸, í† í° ê´€ë¦¬)
	// ----------------------------------------------------------------

	// OAuth2 í´ë¼ì´ì–¸íŠ¸ (GitHub, Google ë“±ìœ¼ë¡œ ë¡œê·¸ì¸)
	implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'

	// JWT í† í° ë¼ì´ë¸ŒëŸ¬ë¦¬ (ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€ìš© í† í° ìƒì„±)
	implementation "io.jsonwebtoken:jjwt-api:${jjwtVersion}"        // JWT API
	implementation "io.jsonwebtoken:jjwt-impl:${jjwtVersion}"       // JWT êµ¬í˜„ì²´
	implementation "io.jsonwebtoken:jjwt-jackson:${jjwtVersion}"    // JWT JSON ì²˜ë¦¬

	// ----------------------------------------------------------------
	// ğŸš€ ì„±ëŠ¥ ìµœì í™” (ìºì‹±, ë¹„ë™ê¸° ì²˜ë¦¬)
	// ----------------------------------------------------------------

	// Redis ìºì‹± (ìì£¼ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥í•´ì„œ ë¹ ë¥´ê²Œ ì¡°íšŒ)
	implementation 'org.springframework.boot:spring-boot-starter-data-redis'

	// WebFlux (ë¹„ë™ê¸° ì›¹ í´ë¼ì´ì–¸íŠ¸ - GitHub API í˜¸ì¶œìš©)
	implementation 'org.springframework.boot:spring-boot-starter-webflux'

	// ----------------------------------------------------------------
	// ğŸ” ë°ì´í„° ì²˜ë¦¬ & í¬ë¡¤ë§ (ì™¸ë¶€ ë°ì´í„° ìˆ˜ì§‘)
	// ----------------------------------------------------------------

	// Jsoup (HTML íŒŒì‹±, ì›¹ í¬ë¡¤ë§ìš©)
	implementation "org.jsoup:jsoup:${jsoupVersion}"

	// Jackson (JSON ë‚ ì§œ ì²˜ë¦¬ ê°œì„ )
	implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310'

	// ----------------------------------------------------------------
	// ğŸ“– API ë¬¸ì„œí™” (í¬íŠ¸í´ë¦¬ì˜¤ìš© - ìë™ìœ¼ë¡œ API ë¬¸ì„œ ìƒì„±)
	// ----------------------------------------------------------------

	// SpringDoc OpenAPI (Swagger UI ìë™ ìƒì„±)
	// ë¸Œë¼ìš°ì €ì—ì„œ localhost:8080/swagger-ui.html ì ‘ì†í•˜ë©´ API ë¬¸ì„œ í™•ì¸ ê°€ëŠ¥
	implementation "org.springdoc:springdoc-openapi-starter-webmvc-ui:${springDocVersion}"

	// ----------------------------------------------------------------
	// ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ (ì‹¤ì œ ë°ì´í„° ì €ì¥ì†Œ)
	// ----------------------------------------------------------------

	// PostgreSQL ë“œë¼ì´ë²„ (ì‹¤ì œ ìš´ì˜ ë°ì´í„°ë² ì´ìŠ¤)
	runtimeOnly 'org.postgresql:postgresql'

	// H2 Database (ê°œë°œìš© ì„ì‹œ ë°ì´í„°ë² ì´ìŠ¤ - ë©”ëª¨ë¦¬ì— ì €ì¥)
	runtimeOnly 'com.h2database:h2'

	// ----------------------------------------------------------------
	// ğŸ› ï¸ ê°œë°œ í¸ì˜ì„± ë„êµ¬ë“¤
	// ----------------------------------------------------------------

	// Spring Boot DevTools (ì½”ë“œ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘)
	developmentOnly 'org.springframework.boot:spring-boot-devtools'

	// Lombok (ì½”ë“œ ìë™ ìƒì„± - @Getter, @Setter, @ToString ë“±)
	compileOnly 'org.projectlombok:lombok'              // ì»´íŒŒì¼ ì‹œì—ë§Œ í•„ìš”
	annotationProcessor 'org.projectlombok:lombok'     // ì–´ë…¸í…Œì´ì…˜ ì²˜ë¦¬

	// ----------------------------------------------------------------
	// ğŸ§ª í…ŒìŠ¤íŠ¸ ê´€ë ¨ (ì½”ë“œ ê²€ì¦ìš©)
	// ----------------------------------------------------------------

	// Spring Boot í…ŒìŠ¤íŠ¸ ë„êµ¬ë“¤ (JUnit, Mockito ë“± í¬í•¨)
	testImplementation 'org.springframework.boot:spring-boot-starter-test'

	// Spring Security í…ŒìŠ¤íŠ¸ ë„êµ¬ (ë¡œê·¸ì¸ ê´€ë ¨ í…ŒìŠ¤íŠ¸)
	testImplementation 'org.springframework.security:spring-security-test'

	// JUnit í”Œë«í¼ (í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì—”ì§„)
	testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
}

// ================================================================
// ğŸ§ª í…ŒìŠ¤íŠ¸ ì„¤ì • (í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•)
// ================================================================
tasks.named('test') {
	// JUnit 5 í”Œë«í¼ ì‚¬ìš© (ìµœì‹  í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬)
	useJUnitPlatform()
}

// ================================================================
// ğŸ“Š ì‚¬ìš©ì ì •ì˜ íƒœìŠ¤í¬ (ê°œë°œìê°€ ì§ì ‘ ë§Œë“  ëª…ë ¹ì–´)
// ================================================================

// í”„ë¡œì íŠ¸ ì •ë³´ ì¶œë ¥ íƒœìŠ¤í¬ (í„°ë¯¸ë„ì—ì„œ ./gradlew projectInfo ì‹¤í–‰)
tasks.register('projectInfo') {
	doLast {
		println "="*50
		println "ğŸ“‹ mapofdev í”„ë¡œì íŠ¸ ì •ë³´"
		println "="*50
		println "í”„ë¡œì íŠ¸ëª…: ${project.name}"
		println "ë²„ì „: ${project.version}"
		println "ì„¤ëª…: ${project.description}"
		println "Java ë²„ì „: ${java.toolchain.languageVersion.get()}"
		println "Spring Boot ë²„ì „: ${dependencyManagement.importedProperties['spring-boot.version']}"
		println "="*50
	}
}

// ì˜ì¡´ì„± ì •ë³´ ì¶œë ¥ íƒœìŠ¤í¬ (ì–´ë–¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì‚¬ìš©ë˜ëŠ”ì§€ í™•ì¸)
tasks.register('showDependencies') {
	doLast {
		println "ğŸ“¦ ì£¼ìš” ì˜ì¡´ì„± ì •ë³´:"
		println "- Spring Boot Web (REST API ê°œë°œ)"
		println "- Spring Boot JPA (ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™)"
		println "- Spring Boot Security (ë³´ì•ˆ)"
		println "- OAuth2 Client (GitHub ë¡œê·¸ì¸)"
		println "- JWT (í† í° ì¸ì¦)"
		println "- Redis (ìºì‹±)"
		println "- PostgreSQL (ë°ì´í„°ë² ì´ìŠ¤)"
		println "- H2 (ê°œë°œìš© DB)"
		println "- Lombok (ì½”ë“œ ìë™ ìƒì„±)"
		println "- SpringDoc (API ë¬¸ì„œ)"
		println "- Jsoup (ì›¹ í¬ë¡¤ë§)"
	}
}

/*
 * ================================================================
 * ğŸ“š í•™ìŠµ ê°€ì´ë“œ
 * ================================================================
 * 
 * ğŸ¯ Gradle ëª…ë ¹ì–´ (í„°ë¯¸ë„ì—ì„œ ì‹¤í–‰):
 * 
 * ./gradlew build          # í”„ë¡œì íŠ¸ ë¹Œë“œ (ì»´íŒŒì¼ + í…ŒìŠ¤íŠ¸)
 * ./gradlew bootRun        # ìŠ¤í”„ë§ ë¶€íŠ¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
 * ./gradlew test           # í…ŒìŠ¤íŠ¸ ì‹¤í–‰
 * ./gradlew clean          # ë¹Œë“œ ê²°ê³¼ë¬¼ ì‚­ì œ
 * ./gradlew projectInfo    # í”„ë¡œì íŠ¸ ì •ë³´ ì¶œë ¥ (ìš°ë¦¬ê°€ ë§Œë“  ëª…ë ¹ì–´)
 * ./gradlew showDependencies  # ì˜ì¡´ì„± ì •ë³´ ì¶œë ¥ (ìš°ë¦¬ê°€ ë§Œë“  ëª…ë ¹ì–´)
 * 
 * ğŸ” ì˜ì¡´ì„± íƒ€ì… ì„¤ëª…:
 * 
 * implementation    # ì»´íŒŒì¼ + ëŸ°íƒ€ì„ì— í•„ìš” (ê°€ì¥ ì¼ë°˜ì )
 * compileOnly       # ì»´íŒŒì¼ ì‹œì—ë§Œ í•„ìš” (Lombok ë“±)
 * runtimeOnly       # ëŸ°íƒ€ì„ì—ë§Œ í•„ìš” (DB ë“œë¼ì´ë²„ ë“±)
 * testImplementation # í…ŒìŠ¤íŠ¸ ì‹œì—ë§Œ í•„ìš”
 * developmentOnly   # ê°œë°œ ì‹œì—ë§Œ í•„ìš” (DevTools ë“±)
 * annotationProcessor # ì–´ë…¸í…Œì´ì…˜ ì²˜ë¦¬ (Lombok ë“±)
 * 
 * ğŸ¨ ì£¼ìš” Spring Boot Starter ì„¤ëª…:
 * 
 * spring-boot-starter-web       # ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ (Tomcat + Spring MVC)
 * spring-boot-starter-data-jpa  # JPA (Hibernate + Spring Data JPA)
 * spring-boot-starter-security  # Spring Security
 * spring-boot-starter-test      # í…ŒìŠ¤íŠ¸ ë„êµ¬ë“¤ (JUnit, Mockito ë“±)
 * 
 * ğŸ—ï¸ ë¹Œë“œ íŒŒì¼ êµ¬ì¡°:
 * 
 * plugins { }          # ì‚¬ìš©í•  í”ŒëŸ¬ê·¸ì¸ë“¤
 * repositories { }     # ë¼ì´ë¸ŒëŸ¬ë¦¬ ì €ì¥ì†Œ
 * dependencies { }     # ì‚¬ìš©í•  ë¼ì´ë¸ŒëŸ¬ë¦¬ë“¤
 * tasks { }           # ì‚¬ìš©ì ì •ì˜ ì‘ì—…ë“¤
 * 
 * ğŸ’¡ ë‹¤ìŒ ë‹¨ê³„:
 * 1. ì´ íŒŒì¼ì„ í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ì €ì¥
 * 2. í„°ë¯¸ë„ì—ì„œ ./gradlew build ì‹¤í–‰
 * 3. src/main/java/dev/mapofdev í´ë”ì— ìë°” í´ë˜ìŠ¤ ìƒì„±
 * 4. application.yml íŒŒì¼ë¡œ ì„¤ì • ê´€ë¦¬
 */